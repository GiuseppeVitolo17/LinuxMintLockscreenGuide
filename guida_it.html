<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🔒 Guida Completa: Personalizzare lo Sfondo del Lock Screen su Linux Mint XFCE</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            font-size: 2.2em;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            font-size: 1.5em;
        }
        h3 {
            color: #7f8c8d;
            margin-top: 25px;
        }
        .toc {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        .toc li {
            margin: 8px 0;
        }
        .toc a {
            text-decoration: none;
            color: #2c3e50;
            font-weight: bold;
        }
        .toc a:hover {
            color: #3498db;
        }
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e74c3c;
        }
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
        }
        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .step {
            background: #e8f4fd;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
        }
        .emoji {
            font-size: 1.2em;
        }
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        li {
            margin: 8px 0;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #ecf0f1;
            text-align: center;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔒 Guida Completa: Personalizzare lo Sfondo del Lock Screen su Linux Mint XFCE</h1>
        
        <p><em>Come risolvere i conflitti tra lock screen e impostare la tua immagine personalizzata</em></p>

        <div class="toc">
            <h2>📋 Indice</h2>
            <ul>
                <li><a href="#problema">🚨 Il Problema</a></li>
                <li><a href="#soluzione">✅ Soluzione Step-by-Step</a></li>
                <li><a href="#configurazione">🎯 Configurazione Finale</a></li>
                <li><a href="#troubleshooting">🔧 Troubleshooting</a></li>
                <li><a href="#script">🤖 Script Automatico</a></li>
                <li><a href="#conclusioni">🎉 Conclusioni</a></li>
            </ul>
        </div>

        <h2 id="problema">🚨 Il Problema</h2>
        
        <p>Su Linux Mint XFCE, è comune avere <strong>conflitti tra multiple lock screen</strong> che causano:</p>
        <ul>
            <li>🖤 Sfondi neri</li>
            <li>🔄 Lock screen duplicati</li>
            <li>🚫 Impossibilità di personalizzare lo sfondo</li>
            <li>⚠️ Errori di servizio</li>
        </ul>

        <div class="error">
            <strong>Sintomi tipici:</strong><br>
            <code>GDBus.Error:org.freedesktop.DBus.Error.ServiceUnknown: 
The name org.freedesktop.ScreenSaver was not provided by any .service files</code>
        </div>

        <h2 id="soluzione">✅ Soluzione Step-by-Step</h2>

        <div class="step">
            <h3>🧹 Passo 1: Pulizia Completa del Sistema</h3>
            <p>Prima di tutto, rimuoviamo tutti i lock screen esistenti e i loro file di configurazione:</p>
            
            <pre><code># Rimuovi tutti i pacchetti lock screen
sudo apt remove --purge light-locker light-locker-settings xfce4-screensaver xscreensaver cinnamon-screensaver mate-screensaver -y

# Rimuovi file di configurazione residui
sudo find /etc -name "*screensaver*" -o -name "*light-locker*" 2>/dev/null | xargs sudo rm -f
sudo find /usr -name "*screensaver*" -o -name "*light-locker*" 2>/dev/null | xargs sudo rm -f
rm -rf ~/.config/autostart/*screensaver* ~/.config/autostart/*light-locker*</code></pre>
        </div>

        <div class="step">
            <h3>📦 Passo 2: Reinstallazione Pulita</h3>
            <p>Reinstalliamo solo i componenti necessari:</p>
            
            <pre><code># Aggiorna i repository
sudo apt update

# Installa light-locker e gnome-screensaver (necessario per il servizio)
sudo apt install light-locker light-locker-settings gnome-screensaver -y</code></pre>
        </div>

        <div class="step">
            <h3>🖼️ Passo 3: Preparazione dell'Immagine</h3>
            <p>Copia la tua immagine preferita in una posizione accessibile al sistema:</p>
            
            <pre><code># Trova la tua immagine
find /home/$USER -name "*wallpaper*" -o -name "*pxfuel*" 2>/dev/null

# Copia l'immagine nel sistema (sostituisci con il percorso della tua immagine)
sudo cp "/home/$USER/Pictures/wallpaperflare.com_wallpaper (1).jpg" /usr/share/backgrounds/lockscreen.jpg
sudo chmod 644 /usr/share/backgrounds/lockscreen.jpg</code></pre>
        </div>

        <div class="step">
            <h3>⚙️ Passo 4: Configurazione XFCE</h3>
            <p>Configura XFCE per usare light-locker:</p>
            
            <pre><code># Crea la configurazione XFCE
cat > ~/.config/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml << 'EOF'
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;channel name="xfce4-session" version="1.0"&gt;
  &lt;property name="general" type="empty"&gt;
    &lt;property name="LockCommand" type="string" value="light-locker-command -l"/&gt;
    &lt;property name="SaveOnExit" type="bool" value="true"/&gt;
  &lt;/property&gt;
&lt;/channel&gt;
EOF</code></pre>
        </div>

        <div class="step">
            <h3>🎨 Passo 5: Configurazione dello Sfondo</h3>
            <p>Imposta la tua immagine come sfondo del lock screen:</p>
            
            <pre><code># Configura gsettings per usare la tua immagine
gsettings set org.gnome.desktop.screensaver picture-uri "file:///usr/share/backgrounds/lockscreen.jpg"
gsettings set org.gnome.desktop.screensaver picture-options "scaled"</code></pre>
        </div>

        <div class="step">
            <h3>🧪 Passo 6: Test</h3>
            <p>Testa il sistema:</p>
            
            <pre><code># Testa il lock screen
light-locker-command -l</code></pre>
        </div>

        <h2 id="configurazione">🎯 Configurazione Finale</h2>

        <h3>📁 Struttura File</h3>
        <pre><code>/usr/share/backgrounds/
├── lockscreen.jpg          # La tua immagine principale
└── lockscreen-alt.jpg      # Immagine alternativa (opzionale)

~/.config/xfce4/xfconf/xfce-perchannel-xml/
└── xfce4-session.xml       # Configurazione XFCE</code></pre>

        <h3>🛠️ Comandi Utili</h3>
        <pre><code># Blocca lo schermo manualmente
light-locker-command -l

# Cambia immagine (sostituisci con il percorso della nuova immagine)
sudo cp "/percorso/nuova/immagine.jpg" /usr/share/backgrounds/lockscreen.jpg
gsettings set org.gnome.desktop.screensaver picture-uri "file:///usr/share/backgrounds/lockscreen.jpg"

# Verifica lo stato del lock screen
ps aux | grep light-locker</code></pre>

        <h2 id="script">🤖 Script Automatico</h2>
        
        <div class="info">
            <p>Per automatizzare il processo, usa lo script <code>set-lockscreen.sh</code> incluso in questa repository:</p>
            
            <pre><code># Rendi eseguibile lo script
chmod +x set-lockscreen.sh

# Esegui lo script
./set-lockscreen.sh</code></pre>
        </div>

        <p>Lo script:</p>
        <ul>
            <li>🔍 Trova automaticamente le immagini nella stessa cartella</li>
            <li>📋 Ti permette di scegliere tra le immagini disponibili</li>
            <li>⚙️ Configura automaticamente il lock screen</li>
            <li>🔐 Gestisce i permessi e le configurazioni</li>
        </ul>

        <h2 id="troubleshooting">🔧 Troubleshooting</h2>

        <div class="warning">
            <h3>❌ Problema: "ServiceUnknown" Error</h3>
            <p><strong>Causa:</strong> Manca il servizio gnome-screensaver</p>
            <p><strong>Soluzione:</strong></p>
            <pre><code>sudo apt install gnome-screensaver -y</code></pre>
        </div>

        <div class="warning">
            <h3>🖤 Problema: Sfondo Nero</h3>
            <p><strong>Causa:</strong> Immagine non accessibile o permessi sbagliati</p>
            <p><strong>Soluzione:</strong></p>
            <pre><code># Verifica che l'immagine esista
ls -la /usr/share/backgrounds/lockscreen.jpg

# Correggi i permessi
sudo chmod 644 /usr/share/backgrounds/lockscreen.jpg

# Reimposta gsettings
gsettings set org.gnome.desktop.screensaver picture-uri "file:///usr/share/backgrounds/lockscreen.jpg"</code></pre>
        </div>

        <div class="warning">
            <h3>🔄 Problema: Lock Screen Duplicati</h3>
            <p><strong>Causa:</strong> File di configurazione residui</p>
            <p><strong>Soluzione:</strong></p>
            <pre><code># Rimuovi tutti gli autostart
rm -f ~/.config/autostart/*lock* ~/.config/autostart/*screensaver*

# Riavvia la sessione
sudo reboot</code></pre>
        </div>

        <h2 id="conclusioni">🎉 Conclusioni</h2>

        <div class="success">
            <p>Con questa guida hai:</p>
            <ul>
                <li>✅ <strong>Risolto</strong> i conflitti tra lock screen</li>
                <li>✅ <strong>Configurato</strong> light-locker come sistema principale</li>
                <li>✅ <strong>Impostato</strong> la tua immagine personalizzata</li>
                <li>✅ <strong>Creato</strong> un sistema stabile e funzionante</li>
            </ul>
        </div>

        <h3>🚀 Vantaggi della Soluzione</h3>
        <ul>
            <li>🧹 <strong>Sistema pulito:</strong> Nessun conflitto tra lock screen</li>
            <li>🎨 <strong>Personalizzabile:</strong> Facile cambiare l'immagine</li>
            <li>⚖️ <strong>Stabile:</strong> Configurazione standard XFCE</li>
            <li>🔧 <strong>Manutenibile:</strong> Facile da aggiornare e modificare</li>
        </ul>

        <h3>📋 Prossimi Passi</h3>
        <ol>
            <li>🎛️ <strong>Personalizza ulteriormente:</strong> Usa "Light Locker Settings" per altre opzioni</li>
            <li>💾 <strong>Backup:</strong> Salva la configurazione per futuri aggiornamenti</li>
            <li>🔍 <strong>Esplora:</strong> Prova altre immagini per il lock screen</li>
        </ol>

        <h3>📚 Risorse Aggiuntive</h3>
        <ul>
            <li><a href="https://docs.xfce.org/">Documentazione ufficiale XFCE</a></li>
            <li><a href="https://forums.linuxmint.com/">Linux Mint Community</a></li>
            <li><a href="https://github.com/the-cavalry/light-locker">Light Locker GitHub</a></li>
        </ul>

        <div class="footer">
            <p><em>Guida creata per risolvere i problemi di lock screen su Linux Mint XFCE. Testata e funzionante!</em></p>
            <p><strong>Buon lock screen personalizzato! 🔒✨</strong></p>
        </div>
    </div>
</body>
</html>
